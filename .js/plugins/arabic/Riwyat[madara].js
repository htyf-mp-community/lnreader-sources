"use strict";var a=this&&this.__awaiter||function(a,e,t,d){return new(t||(t=Promise))((function(l,r){function n(a){try{s(d.next(a))}catch(a){r(a)}}function i(a){try{s(d.throw(a))}catch(a){r(a)}}function s(a){var e;a.done?l(a.value):(e=a.value,e instanceof t?e:new t((function(a){a(e)}))).then(n,i)}s((d=d.apply(a,e||[])).next())}))},e=this&&this.__generator||function(a,e){var t,d,l,r,n={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return r={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function i(i){return function(s){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;r&&(r=0,i[0]&&(n=0)),n;)try{if(t=1,d&&(l=2&i[0]?d.return:i[0]?d.throw||((l=d.return)&&l.call(d),0):d.next)&&!(l=l.call(d,i[1])).done)return l;switch(d=0,l&&(i=[2&i[0],l.value]),i[0]){case 0:case 1:l=i;break;case 4:return n.label++,{value:i[1],done:0};case 5:n.label++,d=i[1],i=[0];continue;case 7:i=n.ops.pop(),n.trys.pop();continue;default:if(!(l=n.trys,(l=l.length>0&&l[l.length-1])||6!==i[0]&&2!==i[0])){n=0;continue}if(3===i[0]&&(!l||i[1]>l[0]&&i[1]<l[3])){n.label=i[1];break}if(6===i[0]&&n.label<l[1]){n.label=l[1],l=i;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(i);break}l[2]&&n.ops.pop(),n.trys.pop();continue}i=e.call(a,n)}catch(a){i=[6,a],d=0}finally{t=l=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:1}}([i,s])}}},t=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(exports,"__esModule",{value:1});var d=require("@libs/fetch"),l=require("@libs/filterInputs"),r=require("cheerio"),n=require("@libs/defaultCover"),i=require("@libs/novelStatus"),s=t(require("dayjs")),u=function(a,e){return new RegExp(e.join("|")).test(a)},o="novel-genre",c="novel",b=new(function(){function t(a){this.fetchImage=d.fetchFile,this.parseData=function(a){var e,t=(0,s.default)(),d=(null===(e=a.match(/\d+/))||void 0===e?void 0:e[0])||"",l=parseInt(d,10);if(!d)return a;if(u(a,["detik","segundo","second","วินาที"]))t.subtract(l,"second");else if(u(a,["menit","dakika","min","minute","minuto","นาที","دقائق"]))t.subtract(l,"minute");else if(u(a,["jam","saat","heure","hora","hour","ชั่วโมง","giờ","ore","ساعة","小时"]))t.subtract(l,"hours");else if(u(a,["hari","gün","jour","día","dia","day","วัน","ngày","giorni","أيام","天"]))t.subtract(l,"days");else if(u(a,["week","semana"]))t.subtract(l,"week");else if(u(a,["month","mes"]))t.subtract(l,"month");else{if(!u(a,["year","año"]))return a;t.subtract(l,"year")}return t.format("LL")},this.id=a.id,this.name=a.sourceName;var e=a.sourceName.replace(/\s+/g,"").toLowerCase();this.icon="multisrc/madara/icons/".concat(e,".png"),this.site=a.sourceSite,this.version="1.0.0",this.options=a.options,this.filters=a.filters}return t.prototype.popularNovels=function(t,l){var n,i,s,u,b,v,h=l.filters,p=l.showLatestNovels;return a(this,void 0,void 0,(function(){var a,l,f,m,g=this;return e(this,(function(e){switch(e.label){case 0:return a=[],l=this.site,(null===(n=null==h?void 0:h.genres)||void 0===n?void 0:n.value)?l+=((null===(s=null===(i=this.options)||void 0===i?void 0:i.path)||void 0===s?void 0:s.genres)||o)+"/"+h.genres.value:l+=(null===(b=null===(u=this.options)||void 0===u?void 0:u.path)||void 0===b?void 0:b.novels)||c,l+="/page/"+t+"/?m_orderby="+(p?"latest":(null===(v=null==h?void 0:h.sort)||void 0===v?void 0:v.value)||"rating"),[4,(0,d.fetchApi)(l).then((function(a){return a.text()}))];case 1:return f=e.sent(),(m=(0,r.load)(f))(".manga-title-badges").remove(),m(".page-item-detail").each((function(e,t){var d=m(t).find(".post-title").text().trim(),l=m(t).find(".post-title").find("a").attr("href")||"";if(d&&l){var r=m(t).find("img"),n={name:d,cover:r.attr("data-src")||r.attr("src"),path:l.replace(g.site,"")};a.push(n)}})),[2,a]}}))}))},t.prototype.parseNovel=function(t){var l;return a(this,void 0,void 0,(function(){var a,u,o,c,b,v,h,p,f=this;return e(this,(function(e){switch(e.label){case 0:return[4,(0,d.fetchApi)(this.site+t).then((function(a){return a.text()}))];case 1:return a=e.sent(),(u=(0,r.load)(a))(".manga-title-badges, #manga-title span").remove(),(o={path:t,name:u(".post-title h1").text().trim()||u("#manga-title h1").text()}).cover=u(".summary_image > a > img").attr("data-lazy-src")||u(".summary_image > a > img").attr("data-src")||u(".summary_image > a > img").attr("src")||u(".summary_image > a > img").attr("src")||n.defaultCover,u(".post-content_item, .post-content").each((function(){var a=u(this).find("h5").text().trim(),e=u(this).find(".summary-content").text().trim();switch(a){case"Genre(s)":case"Género(s)":case"التصنيفات":o.genres=e;break;case"Author(s)":case"Autor(es)":case"المؤلف":case"المؤلف (ين)":o.author=e;break;case"Status":case"Estado":o.status=e.includes("OnGoing")||e.includes("مستمرة")?i.NovelStatus.Ongoing:i.NovelStatus.Completed}})),u("div.summary__content .code-block,script").remove(),o.summary=u("div.summary__content").text().trim()||u("#tab-manga-about").text().trim()||u('.post-content_item h5:contains("Summary")').next().text().trim(),c=[],b="",(null===(l=this.options)||void 0===l?void 0:l.useNewChapterEndpoint)?[4,(0,d.fetchApi)(this.site+t+"ajax/chapters/",{method:"POST"}).then((function(a){return a.text()}))]:[3,3];case 2:return b=e.sent(),[3,5];case 3:return v=u(".rating-post-id").attr("value")||u("#manga-chapters-holder").attr("data-id")||"",(h=new FormData).append("action","manga_get_chapters"),h.append("manga",v),[4,(0,d.fetchApi)(this.site+"wp-admin/admin-ajax.php",{method:"POST",body:h}).then((function(a){return a.text()}))];case 4:b=e.sent(),e.label=5;case 5:return"0"!==b&&(u=(0,r.load)(b)),p=u(".wp-manga-chapter").length,u(".wp-manga-chapter").each((function(a,e){var t=u(e).find("a").text().trim(),d=u(e).find("span.chapter-release-date").text().trim();d=d?f.parseData(d):(0,s.default)().format("LL");var l=u(e).find("a").attr("href")||"";c.push({name:t,path:l.replace(f.site,""),releaseTime:d||null,chapterNumber:p-a})})),o.chapters=c.reverse(),[2,o]}}))}))},t.prototype.parseChapter=function(t){return a(this,void 0,void 0,(function(){var a,l;return e(this,(function(e){switch(e.label){case 0:return[4,(0,d.fetchApi)(this.site+t).then((function(a){return a.text()}))];case 1:return a=e.sent(),l=(0,r.load)(a),[2,l(".text-left").html()||l(".text-right").html()||l(".entry-content").html()||l(".c-blog-post > div > div:nth-child(2)").html()||""]}}))}))},t.prototype.searchNovels=function(t,l){return a(this,void 0,void 0,(function(){var a,l,n,i,s=this;return e(this,(function(e){switch(e.label){case 0:return a=[],l=this.site+"?s="+t+"&post_type=wp-manga",[4,(0,d.fetchApi)(l).then((function(a){return a.text()}))];case 1:return n=e.sent(),(i=(0,r.load)(n))(".c-tabs-item__content").each((function(e,t){var d=i(t).find(".post-title").text().trim(),l=i(t).find(".post-title").find("a").attr("href")||"";if(d&&l){var r=i(t).find("img"),n={name:d,cover:r.attr("data-src")||r.attr("src"),path:l.replace(s.site,"")};a.push(n)}})),[2,a]}}))}))},t}())({id:"riwyat",sourceSite:"https://riwyat.com/",sourceName:"Riwyat",filters:{sort:{label:"Order by",value:"",options:[{label:"Rating",value:"rating"},{label:"A-Z",value:"alphabet"},{label:"Latest",value:"latest"},{label:"Most Views",value:"views"},{label:"New",value:"new-manga"},{label:"Trending",value:"trending"}],type:l.FilterTypes.Picker},genres:{label:"GENRES",value:"",options:[{label:"NONE",value:""},{label:"أكشن",value:"%d8%a3%d9%83%d8%b4%d9%86"},{label:"أيتشي",value:"%d8%a3%d9%8a%d8%aa%d8%b4%d9%8a"},{label:"استراتجي",value:"%d8%a7%d8%b3%d8%aa%d8%b1%d8%a7%d8%aa%d8%ac%d9%8a"},{label:"العصر الحديث",value:"%d8%a7%d9%84%d8%b9%d8%b5%d8%b1-%d8%a7%d9%84%d8%ad%d8%af%d9%8a%d8%ab"},{label:"انتقام",value:"%d8%a7%d9%86%d8%aa%d9%82%d8%a7%d9%85"},{label:"بالغ",value:"%d8%a8%d8%a7%d9%84%d8%ba"},{label:"بناء مملكة",value:"%d8%a8%d9%86%d8%a7%d8%a1-%d9%85%d9%85%d9%84%d9%83%d8%a9"},{label:"بوليسي",value:"%d8%a8%d9%88%d9%84%d9%8a%d8%b3%d9%8a"},{label:"تاريخي",value:"%d8%aa%d8%a7%d8%b1%d9%8a%d8%ae%d9%8a"},{label:"جوسي",value:"%d8%ac%d9%88%d8%b3%d9%8a"},{label:"حريم",value:"%d8%ad%d8%b1%d9%8a%d9%85"},{label:"حياة يومية",value:"%d8%ad%d9%8a%d8%a7%d8%a9-%d9%8a%d9%88%d9%85%d9%8a%d8%a9"},{label:"خيال",value:"%d8%ae%d9%8a%d8%a7%d9%84"},{label:"خيال علمي",value:"%d8%ae%d9%8a%d8%a7%d9%84-%d8%b9%d9%84%d9%85%d9%8a"},{label:"دراما",value:"%d8%af%d8%b1%d8%a7%d9%85%d8%a7"},{label:"رعب",value:"%d8%b1%d8%b9%d8%a8"},{label:"رومانسية",value:"%d8%b1%d9%88%d9%85%d8%a7%d9%86%d8%b3%d9%8a%d8%a9"},{label:"رياضي",value:"%d8%b1%d9%8a%d8%a7%d8%b6%d9%8a"},{label:"زيانشيا",value:"xianxia"},{label:"سنين",value:"%d8%b3%d9%86%d9%8a%d9%86"},{label:"شريحة حياة",value:"%d8%b4%d8%b1%d9%8a%d8%ad%d8%a9-%d8%ad%d9%8a%d8%a7%d8%a9"},{label:"شوانهوان",value:"xuanhuan"},{label:"شوجو",value:"%d8%b4%d9%88%d8%ac%d9%88"},{label:"شونين",value:"%d8%b4%d9%88%d9%86%d9%8a%d9%86"},{label:"شيانشيا",value:"%d8%b4%d9%8a%d8%a7%d9%86%d8%b4%d9%8a%d8%a7"},{label:"عسكري",value:"%d8%b9%d8%b3%d9%83%d8%b1%d9%8a"},{label:"غموض",value:"%d8%ba%d9%85%d9%88%d8%b6"},{label:"فانتازيا",value:"%d9%81%d8%a7%d9%86%d8%aa%d8%a7%d8%b2%d9%8a%d8%a7"},{label:"فنون قتالية",value:"%d9%81%d9%86%d9%88%d9%86-%d9%82%d8%aa%d8%a7%d9%84%d9%8a%d8%a9"},{label:"قوى خارقة",value:"%d9%82%d9%88%d9%89-%d8%ae%d8%a7%d8%b1%d9%82%d8%a9"},{label:"كوميديا",value:"%d9%83%d9%88%d9%85%d9%8a%d8%af%d9%8a%d8%a7"},{label:"كوميك",value:"%d9%83%d9%88%d9%85%d9%8a%d9%83"},{label:"للكبار",value:"%d9%84%d9%84%d9%83%d8%a8%d8%a7%d8%b1"},{label:"مأساة",value:"%d9%85%d8%a3%d8%b3%d8%a7%d8%a9"},{label:"مانجا",value:"%d9%85%d8%a7%d9%86%d8%ac%d8%a7"},{label:"مانها",value:"%d9%85%d8%a7%d9%86%d9%87%d8%a7"},{label:"مانهوا",value:"%d9%85%d8%a7%d9%86%d9%87%d9%88%d8%a7"},{label:"مدرسي",value:"%d9%85%d8%af%d8%b1%d8%b3%d9%8a"},{label:"مصاصي دماء",value:"%d9%85%d8%b5%d8%a7%d8%b5%d9%8a-%d8%af%d9%85%d8%a7%d8%a1"},{label:"مغامرة",value:"%d9%85%d8%ba%d8%a7%d9%85%d8%b1%d8%a9"},{label:"مكتملة",value:"%d9%85%d9%83%d8%aa%d9%85%d9%84%d8%a9"},{label:"نفسي",value:"%d9%86%d9%81%d8%b3%d9%8a"},{label:"نهاية العالم",value:"%d9%86%d9%87%d8%a7%d9%8a%d8%a9-%d8%a7%d9%84%d8%b9%d8%a7%d9%84%d9%85"},{label:"واب تون",value:"%d9%88%d8%a7%d8%a8-%d8%aa%d9%88%d9%86"},{label:"وان شوت",value:"%d9%88%d8%a7%d9%86-%d8%b4%d9%88%d8%aa"}],type:l.FilterTypes.Picker}},options:{useNewChapterEndpoint:1,lang:"Arabic"}});exports.default=b;